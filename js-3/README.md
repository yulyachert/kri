# Задача «Свадьба Аркадия»

Перед выполнением задания внимательно прочитайте:

- [Кодекс чести студента курсов](https://github.com/urfu-2019/guides/blob/master/CODE_OF_CONDUCT.md)
- [О всех этапах проверки задания](https://github.com/urfu-2019/guides/blob/master/workflow/overall.md)
- [Как отправить пулл](https://github.com/urfu-2019/guides/blob/master/workflow/pull.md)
- [Как пройти тесты](https://github.com/urfu-2019/guides/blob/master/workflow/test.md)
- Правила оформления [javascript](https://github.com/urfu-2019/guides/blob/master/codestyle/js.md), [HTML](https://github.com/urfu-2019/guides/blob/master/codestyle/html.md) и [CSS](https://github.com/urfu-2019/guides/blob/master/codestyle/css.md) кода

## Задание

Как-то на одной из лекций Аркадий познакомился с девушкой и в скором времени его корабль, под названием «Любовь», наконец-то готов пришвартоваться в бухте, под названием «Семья». Настало время организовать весёлую свадьбу.

Для этого, по мнению Аркадия, должен быть соблюдён ряд условий:
- Во-первых, на свадьбе должны быть не только друзья, но и друзья друзей
- Во-вторых, слишком незнакомые парни смущают Аркадия и он планирует ограничить уровень неизвестности определённым кругом
- В-третьих, чтобы никому не было грустно – он их собирает в пары «парень + девушка»

Аркадий вновь достаёт свою телефонную книгу с записями о друзьях и дополняет её информацией о том, кто и с кем дружит (`friends`), и кто является его лучшими друзьями (`best`) таким образом:
```js
const friends = [
    {
        name: 'Sam',
        friends: ['Mat', 'Sharon'],
        gender: 'male',
        best: true
    },
    {
        name: 'Sally',
        friends: ['Brad', 'Emily'],
        gender: 'female',
        best: false
    }
];
```

И чтобы помочь Аркадию выбрать кого пригласить необходимо подготовить для него удобные фильтры и итераторы для работы с телефонной книгой.

```js
// Создаем фильтры парней и девушек
const maleFilter = new lib.MaleFilter();
const femaleFilter = new lib.FemaleFilter();

// Создаем итераторы
const femaleIterator = new lib.Iterator(friends, femaleFilter);

// Среди парней приглашаем только луших друзей и друзей лучших друзей
const maleIterator = new lib.LimitedIterator(friends, maleFilter, 2);

const invitedFriends = [];

// Собираем пары «парень + девушка»
while (!maleIterator.done() && !femaleIterator.done()) {
    invitedFriends.push([
        maleIterator.next(),
        femaleIterator.next()
    ]);
}

// Если остались девушки, то приглашаем остальных
while (!femaleIterator.done()) {
    invitedFriends.push(femaleIterator.next());
}
```

Примеры использования можно посмотреть в __index.js__ и в тестах.

### Общие условия

> :warning: Нельзя использовать внешние библиотеки

> :warning: Код необходимо написать в интерфейсах зафиксированных в файле lib.js. То есть использовать функции-конструкторы и методы работы с прототипами, и не использовать «классы».

- Лучшие друзья помечены флагом `best`
- Для каждого друга указан список его друзей
- Дружба всегда взаимная
- Обход должен происходить, начиная с **лучших** друзей
- Обход всегда идет **в алфавитном порядке** имен
- Друзья не должны обходиться дважды
- Первый круг друзей – это лучшие друзья
- Второй круг друзей – это друзья лучших друзей
- Третий круг и остальные строятся аналогичным образом
- Гарантируется, что на входе будут корректные условия
    - Неориентированный граф друзей
    - Все перечисленные друзья в свойствах `friends` будут существовать во входном массиве
- Граф друзей может быть несвязным и/или цикличным

### Условия для Iterator
- Создает объект итератора, с помощью которого можно обойти друзей по заданным правилам
- На вход он принимает массив и объект фильтра для фильтрации некоторых друзей
- Если объект фильтра не является производным конструктора `Filter`, должна выброситься ошибка `TypeError`
- Итератор должен иметь два метода: `done()` и `next()`
- Метод `done()` возвращает `true`, если обход закончен, и `false` в противном случае
- Метод `next()` возвращает объект друга или `null`, если обход закончен

### Условия для LimitedIterator
- Наследник `Iterator`
- Имеет ограничение по кругу `maxLevel`. Если передан `maxLevel` равен **1**, то итератор обойдет только первый круг друзей, если **2** – первый и второй. И так далее.

### Условия для Filter
- Создает фильтр, который решает какой друг подходит для итерации
- По умолчанию такой фильтр никого не отсеивает

### Условия для MaleFilter
- Наследник `Filter`
- Позволяет итерироваться по друзьям мужского пола

### Условия для FemaleFilter
- Наследник `Filter`
- Позволяет итерироваться по друзьям женского пола

<img width="800" alt="wedding" src="https://cloud.githubusercontent.com/assets/4534405/20384988/82083cf4-acd7-11e6-893f-46dd4d7c5004.png">
